import fs from "fs"
import path from "path"

// Example emojis you want to include
const emojiList = ["ğŸŒ¸", "ğŸŒ¼", "ğŸŒº", "ğŸŒ»", "ğŸŒ·", "ğŸŒ¹", "ğŸ¥€", "ğŸ€", "ğŸŒ¿", "ğŸ„", "ğŸŒ±", "ğŸŒ¾", "ğŸŒµ", "ğŸŒ³", "ğŸŒ²", "ğŸŒ´", "ğŸƒ", "ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹", "ğŸ°", "ğŸ¦Š", "ğŸ»", "ğŸ¼", "ğŸ¨", "ğŸ¯", "ğŸ¦", "ğŸ®", "ğŸ·", "ğŸ¸", "ğŸµ", "ğŸ”", "ğŸ§", "ğŸ¦", "ğŸ¦‰", "ğŸ¦„", "ğŸ´", "ğŸ—", "ğŸº", "ğŸ¦–", "ğŸ¦•", "ğŸ™", "ğŸ¦‘", "ğŸ¦", "ğŸ¦€", "ğŸ¢", "ğŸ", "ğŸ¦", "ğŸ ", "ğŸŸ", "ğŸ¬", "ğŸ³", "ğŸ‹", "ğŸ¦ˆ", "ğŸŠ", "ğŸ¦“", "ğŸ¦", "ğŸ¦§", "ğŸ˜", "ğŸ¦›", "ğŸ¦’", "ğŸ¦˜", "ğŸ¦¥", "ğŸ¦¦", "ğŸ¦¨", "ğŸ¦”", "ğŸ¿ï¸", "ğŸ¦œ", "ğŸ¦©", "ğŸ", "ğŸ", "ğŸ¦‹", "ğŸŒ", "ğŸ›", "ğŸª²", "ğŸª³", "ğŸ•·ï¸", "ğŸ¦‚", "ğŸ¦Ÿ", "ğŸ¦—", "ğŸ", "ğŸŒ", "ğŸ‰", "ğŸ‡", "ğŸ“", "ğŸ’", "ğŸ", "ğŸ¥­", "ğŸ‘", "ğŸ", "ğŸ¥", "ğŸ¥‘", "ğŸ¥•", "ğŸŒ½", "ğŸ¥”", "ğŸ ", "ğŸ¥¦", "ğŸ¥¬", "ğŸ¥’", "ğŸ«‘", "ğŸ…", "ğŸ•", "ğŸ”", "ğŸŒ­", "ğŸŸ", "ğŸ¥¨", "ğŸ¥", "ğŸ§‡", "ğŸª", "ğŸ©", "ğŸ«", "ğŸ¬", "ğŸ­", "ğŸ§", "ğŸ¦", "ğŸ¨", "ğŸ°", "ğŸ‚", "ğŸ¿", "ğŸ¥›", "ğŸ§ƒ", "ğŸ¥¤", "ğŸ§‹", "ğŸ¯", "ğŸ«", "ğŸ‹", "ğŸŠ", "ğŸ¥—", "ğŸ¥ª", "ğŸ¥™", "ğŸ±", "ğŸ£", "ğŸ¥Ÿ", "ğŸ¤", "ğŸ¥ ", "ğŸ¢", "ğŸ¡", "ğŸˆ", "ğŸ‰", "ğŸ", "ğŸŠ", "ğŸ€", "ğŸª…", "ğŸµ", "ğŸ¶", "ğŸ€", "âš½", "ğŸˆ", "âš¾", "ğŸ¾", "ğŸ", "ğŸ³", "ğŸ¨", "ğŸ–ï¸", "âœï¸", "ğŸ“š", "ğŸ“–", "ğŸ“˜", "ğŸ“—", "ğŸ“™", "ğŸ§¸", "ğŸª€", "ğŸ§©", "ğŸ¯", "ğŸ²", "ğŸª", "ğŸ›¹", "ğŸš‚", "ğŸš—", "ğŸš•", "ğŸš™", "ğŸšŒ", "ğŸš", "ğŸš²", "ğŸ›´", "ğŸ›¼", "ğŸªƒ", "ğŸª„", "ğŸ›¶", "ğŸª", "ğŸ°", "ğŸ¯", "ğŸ›·", "â›¸ï¸", "ğŸ ", "ğŸ¡", "ğŸ«", "ğŸ—¼", "ğŸ¡", "ğŸ¢", "ğŸ ", "ğŸ–ï¸", "ğŸ•ï¸", "â›º", "ğŸ›–", "ğŸœï¸", "ğŸï¸", "ğŸï¸", "ğŸ›¤ï¸", "ğŸ—ï¸", "ğŸ›ï¸", "ğŸ•Œ", "ğŸ•", "ğŸ›•", "â˜€ï¸", "ğŸŒ¤ï¸", "â›…", "ğŸŒ¥ï¸", "ğŸŒ¦ï¸", "ğŸŒ§ï¸", "ğŸŒ¨ï¸", "â„ï¸", "ğŸ”¥", "ğŸŒªï¸", "ğŸŒˆ", "ğŸŒ™", "ğŸŒš", "ğŸŒ", "â­", "ğŸŒŸ", "âœ¨", "â˜ï¸", "ğŸ’«", "ğŸŒ¬ï¸", "ğŸ’¨", "ğŸŒ«ï¸", "ğŸŒŠ", "ğŸŒ€", "ğŸŒŒ", "ğŸŒ ", "ğŸš€", "ğŸ›¸", "ğŸš", "âœˆï¸", "ğŸš’", "ğŸš‘", "ğŸš“", "ğŸšš", "ğŸšœ", "â›´ï¸", "ğŸ›³ï¸", "ğŸš¤", "ğŸš¡", "ğŸš ", "ğŸšŸ", "ğŸ§™â€â™‚ï¸", "ğŸ§™â€â™€ï¸", "ğŸ§šâ€â™‚ï¸", "ğŸ§šâ€â™€ï¸", "ğŸ§â€â™‚ï¸", "ğŸ§â€â™€ï¸", "ğŸ§œâ€â™‚ï¸", "ğŸ§œâ€â™€ï¸", "ğŸ¦¸â€â™‚ï¸", "ğŸ¦¸â€â™€ï¸", "ğŸ‰", "ğŸ”®", "ğŸ§â€â™‚ï¸", "ğŸ§â€â™€ï¸", "ğŸ§›â€â™‚ï¸", "ğŸ§›â€â™€ï¸", "ğŸ§Ÿâ€â™‚ï¸", "ğŸ§Ÿâ€â™€ï¸", "ğŸ¦¹â€â™‚ï¸", "ğŸ¦¹â€â™€ï¸", "ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ˜†", "ğŸ˜…", "ğŸ˜‚", "ğŸ™‚", "ğŸ˜‰", "ğŸ˜Š", "ğŸ˜", "ğŸ¥°", "ğŸ¤©", "ğŸ˜", "ğŸ¤—", "ğŸ˜º", "ğŸ˜¸", "ğŸ˜»", "ğŸ¤–", "ğŸ‘»", "ğŸƒ", "ğŸ˜‡", "ğŸ¥³", "ğŸ¤ª", "ğŸ˜‹", "ğŸ˜›", "ğŸ˜", "ğŸ¤¤", "ğŸ¤­", "ğŸ¤«", "ğŸ¤”", "ğŸ’–", "ğŸ’›", "ğŸ’š", "ğŸ’™", "ğŸ’œ", "ğŸ§¡", "ğŸ’•", "ğŸ’", "ğŸ’“", "ğŸ’—", "ğŸ’˜", "ğŸ’", "ğŸ’Ÿ", "ğŸ’Œ", "â£ï¸", "ğŸ’”", "ğŸ’¤", "ğŸ¤", "ğŸ§", "ğŸ¼", "ğŸ¹", "ğŸ¸", "ğŸº", "ğŸ·", "ğŸ¥", "ğŸª•", "ğŸª—", "ğŸ»", "ğŸ™ï¸", "ğŸ‘‘", "ğŸ©", "ğŸ§¢", "ğŸ§ ", "ğŸ’¡", "ğŸ”¦", "ğŸ“¸", "ğŸ¥", "ğŸ“º", "ğŸ–¥ï¸", "âŒ¨ï¸", "ğŸ–±ï¸", "ğŸ•¹ï¸", "ğŸ®", "ğŸ›ï¸", "ğŸ§­", "ğŸ§±", "ğŸ›’", "ğŸ›ï¸", "ğŸ§´", "ğŸª", "ğŸŒ", "ğŸšª", "ğŸ‘‚", "ğŸ‘£", "ğŸ—ºï¸", "ğŸ”", "ğŸ“", "â¡ï¸", "ğŸ‘€", "ğŸ§’", "ğŸ‡", "ğŸ—£ï¸", "ğŸ¤", "ğŸ‘Ÿ", "ğŸ§š", "ğŸ’§", "ğŸª¨", "ğŸ˜®", "ğŸ«§", "ğŸ¦¶", "ğŸ’¦", "ğŸ›", "â­ï¸", "â¬†ï¸", "ğŸ™ï¸", "ğŸª´", "ğŸŒ…", "ğŸ“¦", "ğŸ˜´", "ğŸ›¡ï¸", "ğŸ—¡ï¸", "ğŸ’", "ğŸŒ", "ğŸ—»", "ğŸ", "ğŸ§³", "ğŸ›¬", "ğŸš†", "ğŸŒƒ", "ğŸ”†", "ğŸªŸ", "ğŸš¦", "ğŸ‘¦", "ğŸ", "ğŸ¥‹", "ğŸ§‘â€ğŸ¤â€ğŸ§‘", "ğŸ§˜", "ğŸ™‡", "ğŸªµ", "ğŸ’ª", "â¤ï¸", "ğŸ™Œ", "ğŸ¤", "ğŸ™", "ğŸ¥¢", "ğŸµ", "ğŸ‘¨â€ğŸ³", "â›©ï¸", "ğŸ””", "ğŸ•Šï¸", "ğŸ‹", "ğŸ¾", "ğŸ•¯ï¸", "ğŸª‘", "ğŸ®", "ğŸ", "ğŸ†", "ğŸ‘¯", "ğŸ–Œï¸", "ğŸ–¤", "ğŸ“œ", "âœï¸", "ğŸ‘¸", "ğŸ’ƒ", "ğŸ©°", "ğŸ‡", "ğŸª˜", "ğŸŒ", "ğŸ•º", "ğŸ›ï¸", "ğŸ‘§", "ğŸ¦¢", "ğŸŒ‡", "ğŸƒâ€â™€ï¸", "ğŸ‘µ", "ğŸ‘—", "ğŸ‘‹", "ğŸš", "ğŸœ", "ğŸ²", "â™¨ï¸", "ğŸ½ï¸", "ğŸº", "ğŸª™", "ğŸ›«", "â“", "ğŸ‘©â€âš•ï¸", "ğŸ©º", "ğŸ§º", "ğŸŒ„", "ğŸ˜ï¸", "ğŸŒ¶ï¸", "â˜•ï¸", "ğŸ‘¨â€âš•ï¸", "ğŸ§ª", "ğŸ“", "ğŸš¶â€â™€ï¸", "ğŸ§—â€â™‚ï¸", "ğŸ¤¸â€â™‚ï¸", "ğŸƒâ€â™‚ï¸", "ğŸ¤¹â€â™‚ï¸", "ğŸ¤¸", "ğŸ¤", "ğŸ˜”", "ğŸ¤", "ğŸ§—", "ğŸ”ï¸", "âœ‹", "ğŸ¥£", "ğŸ¥„", "â³", "ğŸ§¥", "ğŸ§£", "ğŸ‚", "ğŸŒ°", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦", "ğŸ›£ï¸", "âš”ï¸", "ğŸ—ï¸", "ğŸ†˜", "âš¡", "ğŸ¦‡", "ğŸ", "ğŸ‘¹", "ğŸ‘º", "ğŸš«", "ğŸ¤º", "ğŸª¢", "ğŸ”“", "ğŸ", "ğŸƒ", "â™‚", "ğŸ“£", "ğŸ—º", "ğŸ‘©", "ğŸ™‰", "âš ", "â¤", "ğŸ’¥", "ğŸ˜¢", "â˜€", "ğŸ©¹", "ğŸ¦µ", "ğŸ”§", "ğŸ‘¨", "ğŸ¦º", "â›¹", "â™€", "ğŸŸ", "â±", "ğŸ˜“", "ğŸ¤š", "ğŸ‘", "ğŸ†", "ğŸ“ˆ", "ğŸ…", "ğŸ“…", "ğŸ¥‡", "ğŸ–", "ğŸ–Œ", "ğŸ–¼", "ğŸ‘¾", "ğŸŒ«", "ğŸŒ†", "ğŸ˜¨", "ğŸ’„", "ğŸ¦Œ", "ğŸ›¡", "ğŸ‘«", "ğŸ‘¢", "ğŸŒ§", "â˜”", "ğŸŸ¡", "ğŸ¥¾", "â„", "ğŸ—£", "ğŸ‘¶", "ğŸ¥±", "ğŸ³", "ğŸ“", "ğŸˆ", "ğŸ§¶", "ğŸ¤²", "ğŸ—‘", "ğŸŸ¢", "ğŸ˜¿", "ğŸ˜Ÿ", "ğŸ’¬", "ğŸ¥·", "ğŸ¦¸", "ğŸªœ", "ğŸ”", "ğŸ•³", "ğŸ¹", "ğŸ¥…", "ğŸ‘­", "ğŸ½", "ğŸ§¤", "ğŸ­", "âš”", "âœ¡", "ğŸ§µ", "âœ…", "ğŸ—¡", "ğŸ¤¡", "ğŸ›‹", "ğŸ›Œ", "ğŸ™ˆ", "ğŸ›", "ğŸ©²", "ğŸ§·", "ğŸ˜œ", "ğŸ‘…", "ğŸ’", "ğŸ¤£", "ğŸ’­", "ğŸ˜•", "ğŸ‹", "ğŸ§‘", "ğŸ¦±", "ğŸ”¢", "â˜", "ğŸ”", "ğŸª†", "ğŸ”Ÿ", "â†•", "ğŸŒ¬", "ğŸ˜¤", "â¡", "ğŸ‘–", "ğŸ‘‰", "ğŸ˜²", "ğŸŸ¦", "ğŸ”Š", "ğŸ”", "ğŸ‡¹", "ğŸ‡­", "âœˆ", "â€", "ï¸", "ğŸ‡±", "ğŸ‡¦", "ğŸ‘ƒ", "ğŸ", "ğŸ‘œ", "ğŸš¶", "ğŸ™", "ğŸ", "ğŸ¥¥", "ğŸ¹", "ğŸª§", "ğŸ›", "ğŸ§Š", "ğŸª", "ğŸ§", "ğŸª¶", "ğŸ”¬", "âš™", "ğŸ“", "ğŸ—“", "ğŸ¤¾", "ğŸ¢", "ğŸŸ©", "âš–", "ğŸ˜£", "ğŸš´", "ğŸ§“", "ğŸ—", "ğŸ½", "ğŸ‘´", "ğŸ‘•", "ğŸ–", "ğŸ¥š", "ğŸ§‚", "ğŸ", "â°", "ğŸ´", "ğŸ‘ª", "ğŸ˜·", "âœ", "ğŸ–", "ğŸŸ¥", "ğŸ”´", "ğŸ˜¯"]

if (module === require.main) {
    const folder = path.resolve(__dirname, "./assets/svg")
    const outFile = path.resolve(__dirname, "./EmojiMap.tsx")

    // Dictionary to dedupe emojis
    const uniqueMap: Record<string, string> = {}

    function fileName(emoji: string) {
        return `${emoji.codePointAt(0)?.toString(16)}.svg`
    }

    emojiList.forEach((emoji) => {
        try {
            const filePath = path.join(folder, fileName(emoji))
            let svg = fs.readFileSync(filePath, "utf8")

            // Remove outer <svg> wrapper
            svg = svg.replace(/<svg[^>]*>/, "").replace(/<\/svg>/, "").trim()

            // Convert attributes to JSX-compatible names
            svg = svg.replace(/fill-opacity=/g, "fillOpacity=")
            svg = svg.replace(/stroke-width=/g, "strokeWidth=")
            svg = svg.replace(/fill-rule=/g, "fillRule=")
            svg = svg.replace(/clip-rule=/g, "clipRule=")

            // Store in dict (duplicates automatically overwritten)
            uniqueMap[emoji] = `<g>${svg}</g>`
        } catch (error) {
            console.warn(`Warning: Could not process emoji "${emoji}": ${error}`)
        }
    })

    // Build file content OUTSIDE the loop
    let fileContent = `import { ReactElement } from "react";

export const emojiMap: Record<string, ReactElement> = {
`

    for (const [emoji, jsx] of Object.entries(uniqueMap)) {
        fileContent += `  "${emoji}": ${jsx},\n`
    }

    fileContent += "};\n"

    // Write file once
    fs.writeFileSync(outFile, fileContent, "utf8")
    fs.writeFileSync('emojis.json', JSON.stringify(Object.keys(uniqueMap)), "utf8")

    console.log("emojiMap.tsx generated!")
}