import fs from "fs"
import path from "path"

// Example emojis you want to include
const emojiList = [
    // Flowers & plants
    "ğŸŒ¸", "ğŸŒ¼", "ğŸŒº", "ğŸŒ»", "ğŸŒ·", "ğŸŒ¹", "ğŸ¥€", "ğŸ€", "ğŸŒ¿", "ğŸ„", "ğŸŒ±", "ğŸŒ¾", "ğŸŒµ", "ğŸŒ³", "ğŸŒ²", "ğŸŒ´", "ğŸŒµ", "ğŸŒ¾", "ğŸƒ",

    // Animals
    "ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹", "ğŸ°", "ğŸ¦Š", "ğŸ»", "ğŸ¼", "ğŸ¨", "ğŸ¯", "ğŸ¦", "ğŸ®", "ğŸ·", "ğŸ¸", "ğŸµ", "ğŸ”",
    "ğŸ§", "ğŸ¦", "ğŸ¦‰", "ğŸ¦„", "ğŸ´", "ğŸ—", "ğŸº", "ğŸ¦–", "ğŸ¦•", "ğŸ™", "ğŸ¦‘", "ğŸ¦", "ğŸ¦€",
    "ğŸ¢", "ğŸ", "ğŸ¦", "ğŸ ", "ğŸŸ", "ğŸ¬", "ğŸ³", "ğŸ‹", "ğŸ¦ˆ", "ğŸŠ", "ğŸ¦“", "ğŸ¦", "ğŸ¦§",
    "ğŸ˜", "ğŸ¦›", "ğŸ¦’", "ğŸ¦˜", "ğŸ¦¥", "ğŸ¦¦", "ğŸ¦¨", "ğŸ¦”", "ğŸ¿ï¸", "ğŸ¦œ", "ğŸª¿", "ğŸ¦©",
    "ğŸ", "ğŸ", "ğŸ¦‹", "ğŸŒ", "ğŸ›", "ğŸª²", "ğŸª³", "ğŸ•·ï¸", "ğŸ¦‚", "ğŸ¦Ÿ", "ğŸ¦—",

    // Food & drink
    "ğŸ", "ğŸŒ", "ğŸ‰", "ğŸ‡", "ğŸ“", "ğŸ’", "ğŸ", "ğŸ¥­", "ğŸ‘", "ğŸ", "ğŸ¥",
    "ğŸ¥‘", "ğŸ¥•", "ğŸŒ½", "ğŸ¥”", "ğŸ ", "ğŸ¥¦", "ğŸ¥¬", "ğŸ¥’", "ğŸ«‘", "ğŸ…",
    "ğŸ•", "ğŸ”", "ğŸŒ­", "ğŸŸ", "ğŸ¥¨", "ğŸ¥", "ğŸ§‡", "ğŸª", "ğŸ©", "ğŸ«", "ğŸ¬", "ğŸ­", "ğŸ§",
    "ğŸ¦", "ğŸ¨", "ğŸ°", "ğŸ‚", "ğŸ¿", "ğŸ¥›", "ğŸ§ƒ", "ğŸ¥¤", "ğŸ§‹",
    "ğŸ¯", "ğŸ«", "ğŸ‹", "ğŸŠ", "ğŸ¥—", "ğŸ¥ª", "ğŸ¥™", "ğŸ±", "ğŸ£", "ğŸ¥Ÿ", "ğŸ¤", "ğŸ¥ ", "ğŸ¢", "ğŸ¡",

    // Objects & toys
    "ğŸˆ", "ğŸ‰", "ğŸ", "ğŸŠ", "ğŸ€", "ğŸª…", "ğŸµ", "ğŸ¶",
    "ğŸ€", "âš½", "ğŸˆ", "âš¾", "ğŸ¾", "ğŸ", "ğŸ³",
    "ğŸ¨", "ğŸ–ï¸", "âœï¸", "ğŸ“š", "ğŸ“–", "ğŸ“˜", "ğŸ“—", "ğŸ“™",
    "ğŸ§¸", "ğŸª€", "ğŸ§©", "ğŸ¯", "ğŸ²", "ğŸª", "ğŸ›¹",
    "ğŸš‚", "ğŸš—", "ğŸš•", "ğŸš™", "ğŸšŒ", "ğŸš", "ğŸš²", "ğŸ›´", "ğŸ›¼",
    "ğŸª", "ğŸª€", "ğŸªƒ", "ğŸª„", "ğŸ›¶", "ğŸª", "ğŸ›¹", "ğŸª€", "ğŸª", "ğŸ°", "ğŸ¯", "ğŸ›·", "â›¸ï¸",

    // Buildings & places
    "ğŸ ", "ğŸ¡", "ğŸ«", "ğŸ°", "ğŸ¯", "ğŸ—¼", "ğŸ¡", "ğŸ¢", "ğŸ ",
    "ğŸ–ï¸", "ğŸ•ï¸", "â›º", "ğŸ›–", "ğŸœï¸", "ğŸï¸", "ğŸï¸", "ğŸ›¤ï¸", "ğŸ—ï¸", "ğŸ›ï¸", "ğŸ•Œ", "ğŸ•", "ğŸ›•",

    // Weather & sky
    "â˜€ï¸", "ğŸŒ¤ï¸", "â›…", "ğŸŒ¥ï¸", "ğŸŒ¦ï¸", "ğŸŒ§ï¸", "ğŸŒ¨ï¸", "â„ï¸", "ğŸ”¥",
    "ğŸŒªï¸", "ğŸŒˆ", "ğŸŒ™", "ğŸŒš", "ğŸŒ", "â­", "ğŸŒŸ", "âœ¨", "â˜ï¸", "ğŸ’«",
    "ğŸŒ¬ï¸", "ğŸ’¨", "ğŸŒ«ï¸", "ğŸŒŠ", "ğŸŒ€", "ğŸŒŒ", "ğŸŒ ",

    // Transportation
    "ğŸš€", "ğŸ›¸", "ğŸš", "âœˆï¸", "ğŸš‚", "ğŸš—", "ğŸš•", "ğŸšŒ", "ğŸš",
    "ğŸš’", "ğŸš‘", "ğŸš“", "ğŸšš", "ğŸšœ", "ğŸ›¶", "â›´ï¸", "ğŸ›³ï¸", "ğŸš¤", "ğŸš²", "ğŸ›´", "ğŸ›¹", "ğŸ›¼", "ğŸš¡", "ğŸš ", "ğŸšŸ",

    // Fantasy & magical
    "ğŸ§™â€â™‚ï¸", "ğŸ§™â€â™€ï¸", "ğŸ§šâ€â™‚ï¸", "ğŸ§šâ€â™€ï¸", "ğŸ§â€â™‚ï¸", "ğŸ§â€â™€ï¸",
    "ğŸ§œâ€â™‚ï¸", "ğŸ§œâ€â™€ï¸", "ğŸ¦¸â€â™‚ï¸", "ğŸ¦¸â€â™€ï¸",
    "ğŸ¦„", "ğŸ‰", "ğŸª„", "ğŸ”®", "ğŸ§â€â™‚ï¸", "ğŸ§â€â™€ï¸", "ğŸ§›â€â™‚ï¸", "ğŸ§›â€â™€ï¸", "ğŸ§Ÿâ€â™‚ï¸", "ğŸ§Ÿâ€â™€ï¸", "ğŸ¦¹â€â™‚ï¸", "ğŸ¦¹â€â™€ï¸",

    // Faces & emotions
    "ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ˜†", "ğŸ˜…", "ğŸ˜‚", "ğŸ™‚", "ğŸ˜‰", "ğŸ˜Š",
    "ğŸ˜", "ğŸ¥°", "ğŸ¤©", "ğŸ˜", "ğŸ¤—", "ğŸ˜º", "ğŸ˜¸", "ğŸ˜»", "ğŸ¤–", "ğŸ‘»", "ğŸƒ", "ğŸ˜‡", "ğŸ¥³", "ğŸ¤ª", "ğŸ˜‹", "ğŸ˜›", "ğŸ˜", "ğŸ¤¤", "ğŸ¤­", "ğŸ¤«", "ğŸ¤”",

    // Hearts & emotions
    "ğŸ’–", "ğŸ’›", "ğŸ’š", "ğŸ’™", "ğŸ’œ", "ğŸ§¡", "ğŸ©·", "ğŸ©µ",
    "ğŸ’•", "ğŸ’", "ğŸ’“", "ğŸ’—", "ğŸ’˜", "ğŸ’", "ğŸ’Ÿ", "ğŸ’Œ", "â£ï¸", "ğŸ’”", "ğŸ’¤",

    // Music & fun
    "ğŸ¤", "ğŸ§", "ğŸ¼", "ğŸ¹", "ğŸ¸", "ğŸº", "ğŸ·", "ğŸ¥", "ğŸª•", "ğŸª—", "ğŸ»", "ğŸ™ï¸",

    // Misc fun & interactive
    "ğŸ‘‘", "ğŸ©", "ğŸ§¢", "ğŸª€", "ğŸª", "ğŸª„",
    "ğŸ§ ", "ğŸ’¡", "ğŸ”¦", "ğŸ“¸", "ğŸ¥", "ğŸ“º",
    "ğŸ–¥ï¸", "âŒ¨ï¸", "ğŸ–±ï¸", "ğŸ•¹ï¸", "ğŸ®", "ğŸ›ï¸", "ğŸ§­", "ğŸ§±", "ğŸ›’", "ğŸ›ï¸", "ğŸ§´", "ğŸª",

    // MISSING
    "ğŸŒ", "ğŸšª", "ğŸ‘‚", "ğŸ‘£",
    "ğŸ—ºï¸", "ğŸ”", "ğŸ“", "â¡ï¸", "ğŸ‘€", "ğŸ§’",
    "ğŸ‘£", "ğŸ§’", "ğŸ›¤ï¸",
    "ğŸ‡", "ğŸ—£ï¸", "ğŸ¤", "ğŸ‘Ÿ",
    "ğŸ‘‚", "ğŸ§š",
    "ğŸ’§", "â¡ï¸", "ğŸª¨", "ğŸ˜®", "ğŸ«§", "ğŸ‘£",
    "ğŸª¨", "ğŸ¦¶", "ğŸ’¦", "ğŸ‡", "1ï¸âƒ£", "2ï¸âƒ£", "3ï¸âƒ£",
    "â˜ï¸", "ğŸ›", "â­ï¸", "ğŸŒ¬ï¸", "â¬†ï¸",
    "ğŸŒ¬ï¸", "ğŸ™ï¸", "â˜€ï¸",
    "ğŸ’§", "ğŸª´", "ğŸŒ", "ğŸ§’",
    "ğŸŒ¬ï¸", "â˜ï¸", "ğŸ§’", "ğŸ‡", "ğŸï¸", "ğŸŒ…",
    "ğŸ§’", "ğŸ“¦", "ğŸ—ºï¸", "â­ï¸", "ğŸ˜´",
    "âœˆï¸", "ğŸ›¡ï¸", "ğŸ—¡ï¸", "ğŸ’", "ğŸŒ", "ğŸ—»", "ğŸŒ¥ï¸", "ğŸ", "ğŸ§³", "ğŸ›¬", "ğŸ™ï¸", "ğŸš†", "ğŸŒƒ", "ğŸ”†", "ğŸªŸ", "ğŸš¦", "ğŸ‘¦", "ğŸ", "ğŸ—£ï¸", "ğŸ¥‹", "ğŸ§‘â€ğŸ¤â€ğŸ§‘", "ğŸ§˜", "ğŸ™‡", "ğŸªµ", "ğŸ’ª", "â¤ï¸", "ğŸ™Œ", "ğŸ¤", "ğŸ™", "ğŸ¥¢", "ğŸµ", "ğŸ‘¨â€ğŸ³", "â›©ï¸", "ğŸ””", "ğŸŒ¬ï¸", "ğŸ•Šï¸", "ğŸ‹", "ğŸ¾", "ğŸ•¯ï¸", "ğŸª‘", "ğŸ®", "ğŸ", "ğŸ†", "ğŸ‘¯", "ğŸ–Œï¸", "ğŸ–¤", "ğŸ“œ", "âœï¸",
    "ğŸ‘¸", "ğŸ’ƒ", "ğŸ©°", "ğŸ‡", "ğŸª˜", "ğŸŒ", "ğŸ•º", "ğŸ›ï¸",
    "ğŸ‘§", "ğŸ‘§", "ğŸ‘§", "ğŸ¦¢", "ğŸ‘§", "ğŸŒ‡", "ğŸ‘§", "ğŸƒâ€â™€ï¸",
    "ğŸ‘µ", "ğŸ‘—", "ğŸ‘‹", "ğŸš", "ğŸœ", "ğŸ²", "â™¨ï¸", "ğŸ½ï¸", "ğŸº", "ğŸª™", "ğŸ›«", "â“",
    "ğŸ‘©â€âš•ï¸", "ğŸ©º", "ğŸ§º", "ğŸŒ„", "ğŸ˜ï¸", "ğŸŒ¶ï¸", "â˜•ï¸", "ğŸ©º", "ğŸ‘©â€âš•ï¸", "ğŸ‘¨â€âš•ï¸", "ğŸ§ª", "ğŸ“", "ğŸš¶â€â™€ï¸",
    "ğŸ§—â€â™‚ï¸", "ğŸ¤¸â€â™‚ï¸", "ğŸƒâ€â™‚ï¸", "ğŸ¤¹â€â™‚ï¸", "ğŸ¤¸", "ğŸ¤", "ğŸ˜”", "ğŸ¤", "ğŸ§—", "ğŸ”ï¸", "ğŸ§—â€â™‚ï¸", "ğŸ¤¸â€â™‚ï¸", "âœ‹",
    "ğŸ¥£", "ğŸ¥„", "â³", "ğŸ§¥", "ğŸ§£", "ğŸ‚", "ğŸŒ°", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦", "ğŸ›£ï¸",
]


if (module === require.main) {
    const folder = path.resolve(__dirname, "./assets/svg")
    const outFile = path.resolve(__dirname, "./EmojiMap.tsx")

    // Dictionary to dedupe emojis
    const uniqueMap: Record<string, string> = {}

    function fileName(emoji: string) {
        return `${emoji.codePointAt(0)?.toString(16)}.svg`
    }

    emojiList.forEach((emoji) => {
        try {
            const filePath = path.join(folder, fileName(emoji))
            let svg = fs.readFileSync(filePath, "utf8")

            // Remove outer <svg> wrapper
            svg = svg.replace(/<svg[^>]*>/, "").replace(/<\/svg>/, "").trim()

            // Convert attributes to JSX-compatible names
            svg = svg.replace(/fill-opacity=/g, "fillOpacity=")
            svg = svg.replace(/stroke-width=/g, "strokeWidth=")
            svg = svg.replace(/fill-rule=/g, "fillRule=")
            svg = svg.replace(/clip-rule=/g, "clipRule=")

            // Store in dict (duplicates automatically overwritten)
            uniqueMap[emoji] = `<g>${svg}</g>`
        } catch (error) {
            console.warn(`Warning: Could not process emoji "${emoji}": ${error}`)
        }
    })

    // Build file content OUTSIDE the loop
    let fileContent = `import { ReactElement } from "react";

export const emojiMap: Record<string, ReactElement> = {
`

    for (const [emoji, jsx] of Object.entries(uniqueMap)) {
        fileContent += `  "${emoji}": ${jsx},\n`
    }

    fileContent += "};\n"

    // Write file once
    fs.writeFileSync(outFile, fileContent, "utf8")
    fs.writeFileSync('emojis.json', JSON.stringify(Object.keys(uniqueMap)), "utf8")

    console.log("emojiMap.tsx generated!")
}